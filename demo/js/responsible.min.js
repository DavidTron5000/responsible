/*! responsible.js v1.2.0 | (c) 2015 @davidwells | https://github.com/davidwells/responsible */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.responsible=t()}(this,function(){addListener=function(e,t,o){e&&(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o)},removeListener=function(e,t,o){e&&(e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=null)},_logStr=function(e){window.console&&window.console.log("Responsible: "+e)},_argsOrDefault=function(e,t){return"undefined"!=typeof e[t]?e[t]:i[t]},extend=function(e,t){var o,n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},_createCookie=function(e,t,o,n){var i="";if(o){var l=new Date;l.setTime(l.getTime()+24*o*60*60*1e3),i="; expires="+l.toGMTString()}n&&(i="; expires="+o.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},_readCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},_getWidth=function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body;return e.clientWidth},_getViewPort=function(){var e=document.querySelector("meta[name=viewport]");return e?e:(e=document.createElement("meta"),e.name="viewport",e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(e),e)},_loadCSS=function(e){var t=document.getElementById("responsible-css");if(t)return!1;var o=document.createElement("link");o.id="responsible-css",o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(o)},_removeCSS=function(e){e=e||i.path,console.log("filename",e);for(var o=document.getElementsByTagName("link"),n=o.length;n>=0;n--)console.log(o[n]),o[n]&&null!==o[n].getAttribute("href")&&-1!==o[n].getAttribute("href").indexOf(e)&&(console.log("match on ",e),t=o[n].getAttribute("href"),o[n].parentNode.removeChild(o[n]))};var e,t,o={},n=_getViewPort(),i={targetWidth:1280,deviceWidth:"device-width",path:"responsive.css"};return _desktopAddToggle=function(){var e=document.getElementById("responsible-toggle");if(e)return!1;var t=document.body.children[0],n=document.createElement("div");n.id="responsible-toggle",n.style.padding="30px 0 45px",n.style.width="100%",n.style.color="#eaeaea",n.style.fontSize="60px",n.style.fontWeight="bold",n.style.backgroundColor="#444",n.style.textAlign="center",n.style.cursor="pointer",n.innerText="Toggle Mobile Site",document.body.insertBefore(n,t),addListener(n,"click",o.mobile)},_desktopRemoveToggle=function(){var e=document.getElementById("responsible-toggle");e&&(console.log("Destroy desktop toggle"),removeListener(e,"click",o.mobile),document.body.removeChild(e))},_mobileAddToggle=function(){var e=document.getElementById("responsible-mobile-toggle");if(e)return!1;var t=document.body.children[0],n=document.createElement("div");n.id="responsible-mobile-toggle",n.style.position="fixed",n.style.width="127px",n.style.padding="10px",n.style.color="#eaeaea",n.style.fontSize="14px",n.style.fontWeight="bold",n.style.backgroundColor="#444",n.style.textAlign="center",n.style.right="0px",n.style.bottom="0px",n.style.zIndex="99999999",n.innerText="View FullSite",document.body.insertBefore(n,t),addListener(n,"click",o.desktop)},_mobileRemoveToggle=function(){var e=document.getElementById("responsible-mobile-toggle");e&&(console.log("Destroy mobile toggle"),removeListener(e,"click",o.desktop),document.body.removeChild(e))},o.init=function(t){var t=t||{};Options=extend(i,t),console.log("merged options",Options),_getWidth()<Options.targetWidth?(e="mobile",console.log(Options),console.log(Options.targetWidth),console.log("smaller"),_mobileAddToggle()):(e="desktop",console.log("Screen not small enough to trigger"))},o.desktop=function(){return"desktop"===e?!1:(e="desktop",_removeCSS(Options.path),n.setAttribute("content","width="+Options.targetWidth+", user-scalable=yes, initial-scale=.25, maximum-scale=.35"),_mobileRemoveToggle(),_desktopAddToggle(),setTimeout(function(){n.setAttribute("content","width="+Options.targetWidth+", user-scalable=yes, initial-scale=.25, maximum-scale=1")},300),void 0)},o.mobile=function(){if("mobile"===e)return!1;e="mobile",console.log("cached pathhere ",t),console.log("customizations",Options),console.log("add responsive CSS",Options.path);var o=t?t:Options.path;console.log("DO this",o),_loadCSS(o),_desktopRemoveToggle(),_mobileAddToggle(),n.setAttribute("content","width=device-width, user-scalable=yes, initial-scale=1"),Options.doneFunction&&(console.log("has done"),Options.doneFunction())},o}),responsible.init();